<div id="header">
    {{ if hugo.IsMultilingual }}
        {{- partial "languages.html" . }}
    {{- end -}}
    
    <!-- Hidden logo wrapper for mobile titleBar generation -->
    <div id="logo-wrapper" style="display: none;">
        <a href="{{ .Site.BaseURL }}">
            {{- if .Site.Data.globalheader.image }}
                <img src="{{ .Site.Data.globalheader.image | relURL }}" alt="{{ .Site.Data.globalheader.image_alt }}" />
            {{- end }}
            {{ with .Site.Data.globalheader.title }}{{ . | markdownify }}{{ end }}
        </a>
    </div>
    
    <nav id="nav">
        <ul>
            <li class="logo-item">
                <a href="{{ .Site.BaseURL }}" id="logo">
                    {{- if .Site.Data.globalheader.image }}
                        <img src="{{ .Site.Data.globalheader.image | relURL }}" alt="{{ .Site.Data.globalheader.image_alt }}" />
                    {{- end }}
                    {{ with .Site.Data.globalheader.title }}{{ . | markdownify }}{{ end }}
                </a>
            </li>
            {{- range .Site.Menus.main }}
                <li class="{{ if or ($.Page.IsMenuCurrent "main" .) ($.Page.HasMenuCurrent "main" .) }}current{{ end }}">
                    <a href="{{ .URL | default "#" }}">{{ .Name }}</a>
                    {{- if .HasChildren -}}
                    <ul>
                        {{- range .Children }}
                        <li class="{{ if or ($.Page.IsMenuCurrent "main" .) ($.Page.HasMenuCurrent "main" .) }}current{{ end }}">
                            <a href="{{ .URL | default "#" }}">{{ .Name }}</a>
                            {{- if .HasChildren -}}
                            <ul>
                                {{- range .Children }}
                                <li class="{{ if or ($.Page.IsMenuCurrent "main" .) ($.Page.HasMenuCurrent "main" .) }}current{{ end }}">
                                    {{/* aoeu fix 'current' thing */}}
                                    <a href="{{ .URL | default "#" }}">{{ .Name }}</a>
                                {{- end }}
                            </ul>
                            {{- end -}}
                        {{- end }}
                    </ul>
                    {{- end -}}
            {{- end }}
        </ul>
    </nav>
</div>
